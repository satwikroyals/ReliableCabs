@model ReliableCabs.Models.SubscriptionModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/LayoutHeader.cshtml";
    
}


                <!-- /row -->
                <div class="row">
				
				 <div class="col-sm-2">
				
                <div class="btn-group m-r-10">
			
   <table style="width:100%;border-color:none">
             <thead>
                 <tr>     
            <th class ="container .box .box-cell.box1"  > Enter Driver Name</th>
            <th class ="container .box .box-cell.box3">Enter Mobile Number</th>            
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>@Html.TextBox("searchInput", null, new { id = "searchInput",@class = "form-control_new" }) </td>
            <td >@Html.TextBox("searchMobile", null, new { id = "searchMobile",@class = "form-control_new" })</td>
     </tr>
         
      
        </tbody>
        </table>  
                                </div>
							
                    </div>
				
				 <div class="col-sm-10" >
                   
				 </div>
                   
                   
                </div>
                <!-- /.row -->
                  @* <div class="row">
				   <div class="col-md-2"></div>
                    <div class="col-md-8">
                        <div class="panel panel-info welcome-panel">
                           
                            <div class="panel-wrapper collapse in" aria-expanded="true">*@

                                  <div id="body">

                                  <div id="ProdPartials">

                                   @Html.Partial("PartialSubscription", Model)
      
                                    </div>
                                    </div>

                           @*    
                            </div>
                        </div>
                    </div>
					 <div class="col-md-2"></div>
                </div>   *@
                <!-- .row -->

                <!-- /.row -->
                <!-- .row -->
               
                <!-- /.row -->
                <!-- .row -->
               
                <!-- /.row -->
                <!-- ===== Right-Sidebar ===== -->
              
            <!-- /.container-fluid -->
            <footer class="footer t-a-c">
                © 2020 Reliable-Cabs
            </footer>

@section scripts
{
@* <script src="~/Content/js/jquery-2.2.0.min.js"></script>      *@
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
    $(document).ready(function () {
        document.getElementById('Pendingamtnew').value = @ViewBag.NetAmount
        document.getElementById('body').style.display = 'none';

        $("#searchInput").autocomplete({
            minLength: 2,
            source: function (request, response) {
                $.ajax({
                    url: '@Url.Action("GetClients","Subscription")',
                    dataType: "json",
                    data: { term: request.term },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return { label: item.FirstName, val: item.ClientId };
                        }));
                    },

                    error: function (xhr, status, error) {
                        alert("Error");
                    }
                });
            },
           select: function (e, i) {
               $("#searchInput").val(i.item.label);
               var id = i.item.val;
               transload(id);
           },
       });

        $("#searchMobile").autocomplete({
            minLength: 3,
            source: function (request, response) {
                $.ajax({
                    url: '@Url.Action("GetClientMobiles","Subscription")',
                    dataType: "json",
                    data: { term: request.term },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return { label: item.Mobile, val: item.ClientId };
                        }));
                    },

                    error: function (xhr, status, error) {
                        alert("Error");
                    }
                });
            },
            select: function (e, i) {
                $("#searchMobile").val(i.item.label);
                var id = i.item.val;
                transload(id);
            },
        });


        $("#searchInput").on("keyup", function () {
           document.getElementById('searchMobile').value = "";
        });

    
        $("#searchMobile").on("keyup", function () {
            document.getElementById('searchInput').value = "";

        });


        function transload(id) {
            document.getElementById('body').style.display = 'block';
            $("#ProdPartials").load('@(Url.Action("GetSubscriptionDetails","Subscription",null, Request.Url.Scheme))?id=' + id)
            
        }

        
      
    });
</script>
}